<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <environment include="Development">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">      
        <script src="~/bundles/jquery"></script>
        <script src="~/bundles/jqueryval"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
        <script src="~/lib/jquery/dist/jquery.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
        <!-- Material Design Bootstrap -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.2/css/mdb.min.css" rel="stylesheet">
        <!-- JQuery -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <!-- Bootstrap tooltips -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
        <!-- Bootstrap core JavaScript -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <!-- MDB core JavaScript -->
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.2/js/mdb.min.js"></script>
        <link rel="stylesheet" href="~/css/LayoutAuth.css" />
    </environment>
</head>
<body>
    <nav class="navbar navbar-dark bg-primary">
        <a class="navbar-brand" asp-area="" asp-controller="Feed" asp-action="Index">DevCommunity</a>
        <form class="form-inline">                             
            <div id="ex4">
                <span class="p1 fa-stack fa-2x has-badge" data-count="4">
                    <a href="@Url.Action("Index","Event")">
                        <i class="p3 fa fa-calendar fa-stack-1x xfa-inverse" data-count="4b"></i>
                    </a>
                </span>
            </div>             
            <img src="~/Images/UserPhotos/DefaultUserPhoto.png" class="user-photo d-flex rounded-circle avatar  mr-3" style="height:50px;padding-left:12px;" />
        </form>
    </nav>

    <div class="container">
        @RenderBody()
    </div>
    <script>    
        $(function () {
            $.ajax({
                type: "POST",
                url: "@Url.Action("GetUserPhoto","User")",
                contentType: "application/json; charset=utf-8",  
                dataType: "json",
                success: function (response) {
                    if (response != null) {
                        $(".user-photo").attr("src", response);
                    }
                    else {
                          $(".user-photo").attr("src","~/Images/UserPhotos/DefaultUserPhoto.png" );
                    }
                }
            })
        })

            $(function () {
            $.ajax({
                type: "POST",
                url: "@Url.Action("GetNickName","User")",
                contentType: "application/json; charset=utf-8",  
                dataType: "json",
                success: function (response) {
                    if (response != null) {
                        $(".nick-name").text(response);
                    }
                    else {
                        $(".nick-name").text("User Name");
                    }
                }
            })
        })
    </script>
    @RenderSection("ScriptsAuth",required:false)
</body>
</html>